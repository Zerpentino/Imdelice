<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="Imdeliceapp.Popups.OrderStatusPopup"
               CanBeDismissedByTappingOutsideOfPopup="False">
  <Border Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#333333}"
          StrokeShape="{RoundRectangle CornerRadius=22}"
          BackgroundColor="{AppThemeBinding Light=White, Dark=#181818}"
          Padding="0">
    <VerticalStackLayout Padding="20"
                         Spacing="16"
                         WidthRequest="360">
      <Grid ColumnDefinitions="*,Auto"
            ColumnSpacing="8"
            VerticalOptions="Center">
        <Label Text="Cambiar estado"
               FontSize="20"
               FontAttributes="Bold"/>
        <Button Text="✕"
                Grid.Column="1"
                WidthRequest="32"
                HeightRequest="32"
                Padding="0"
                BackgroundColor="Transparent"
                Clicked="Cancel_Clicked"/>
      </Grid>

      <Label x:Name="CurrentStatusLabel"
             FontSize="13"
             TextColor="{AppThemeBinding Light=#666, Dark=#AAA}"/>

      <VerticalStackLayout Spacing="6">
        <Label Text="Nuevo estado"
               FontAttributes="Bold"
               FontSize="14"/>
        <Picker x:Name="StatusPicker"
                ItemDisplayBinding="{Binding Display}"
                Title="Selecciona un estado"/>
      </VerticalStackLayout>

      <VerticalStackLayout Spacing="6">
        <Label Text="Motivo (opcional)"
               FontAttributes="Bold"
               FontSize="14"/>
        <Editor x:Name="ReasonEditor"
                AutoSize="TextChanges"
                Placeholder="Ej. Cliente pidió cancelar"/>
      </VerticalStackLayout>

      <Label x:Name="ValidationLabel"
             TextColor="#E53935"
             FontSize="12"
             IsVisible="False"/>

      <Grid ColumnDefinitions="*,*"
            ColumnSpacing="12">
        <Button Text="Cancelar"
                Clicked="Cancel_Clicked"
                BackgroundColor="{AppThemeBinding Light=#F1E9F1, Dark=#2B1D29}"
                TextColor="{AppThemeBinding Light=#894164, Dark=#D5B2C2}"/>
        <Button Grid.Column="1"
                Text="Guardar"
                BackgroundColor="#894164"
                TextColor="White"
                Clicked="Save_Clicked"/>
      </Grid>
    </VerticalStackLayout>
  </Border>
</toolkit:Popup>
